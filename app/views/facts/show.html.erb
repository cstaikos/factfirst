<div class="text-wrapper">

  <span class="prefact">Fact posted by <%= link_to @fact.user.display_name, @fact.user %> on <%= @fact.created_at.strftime("%B %-d, %Y") %> | Category: <%= @fact.category.name %></span>
  <div class="fact-header">
    <span class="fact-show">
        <%= @fact.body %>
    </span>
    <span class="truth-score"><%= @fact.score %></span>
    <span class="truth-dial">Dial goes here</span>
  </div>


  <div class="evidence">
    <div class="supporting">
      <div class="evidence-title-box-supporting"><h1 class="evidence-header-text">Supporting Evidence (<%= @fact.supporting_evidence.count %>)</h1></div>
      <ul class="evidence-list">
        <% @fact.supporting_evidence.each do |evidence| %>
          <li class="piece-of-evidence">

            <div id="vote-box-<%= evidence.id %>" class="vote-box">
              <%= render 'vote_buttons', evidence: evidence %>
            </div>
            <div class="show-evidence">
              <h4 class="evidence-url"><a href="<%= evidence.url %>"><%= evidence.url%></a></h4>
              <p class="evidence-posting">Added by <%= link_to evidence.user.display_name, evidence.user %> on <%= evidence.created_at.strftime("%B %-d, %Y") %></p>
            </div>

        </li>
      <% end %>
      </ul>
      <div class="add-evidence-box">
        <p>Join the debate! Add your own evidence to support this fact.</p>
        <%= form_for [@fact, @evidence] do |f| %>
          <div class="evidence-url-form-group">
            <%= f.label "URL:", :class => 'evidence-label' %>
            <%= f.url_field :url, :class => 'evidence-field' %>
          </div>

          <%= f.hidden_field :support, value: true %>

          <div class="evidence-submit">
            <%= f.submit 'Create Supporting Evidence', :class => 'evidence-supporting-button' %>
          </div>
        <% end %>
      </div>
    </div>

    <div class="refuting">
      <div class="evidence-title-box-refuting"><h1 class="evidence-header-text">Refuting Evidence (<%= @fact.refuting_evidence.count %>)</h1></div>
      <ul class="evidence-list">
        <% @fact.refuting_evidence.each do |evidence| %>
          <li class="piece-of-evidence">
            <div id="vote-box-<%= evidence.id %>" class="vote-box">
              <%= render 'vote_buttons', evidence: evidence %>
            </div>

            <div class="show-evidence">
              <h4 class="evidence-url"><a href="<%= evidence.url %>"><%= evidence.url %></a></h4>
              <p class="evidence-posting">Added by <%= link_to evidence.user.display_name, evidence.user %> on <%= evidence.created_at.strftime("%B %-d, %Y") %></p>
            </div>

        </li>
      <% end %>
      </ul>
      <div class="add-evidence-box">
        <p>Join the debate! Add your own evidence to refute this fact.</p>
        <%= form_for [@fact, @evidence] do |f| %>
          <div class="evidence-url-form-group">
            <%= f.label "URL:", :class => 'evidence-label' %>
            <%= f.url_field :url, :class => 'evidence-field' %>
          </div>

          <%= f.hidden_field :support, value: false %>

          <div class="evidence-submit">
            <%= f.submit 'Create Refuting Evidence', :class => 'evidence-refuting-button'%>
          </div>
        <% end %>
      </div>
    </div>
  </div>


  <% if current_user == User.find(@fact.user_id)  %>
    <div class="delete-fact-box">
      <%= link_to "Delete This Fact", fact_path(@fact), method: :delete, date: {confirm:"Are you sure you want to delete this
      fact?"}, class: 'delete-fact-link' %><span> (WARNING: permanently deletes this fact)</span>
    </div>
  <% end  %>


  <div class="permalink">
    <div class="subheader">Share this Fact</div>
    <p><a href="<%= root_url[0..-2] + asset_path("fact_photos/#{@fact.id}.png") %>">This will be a copy box ala github. The image will be a modal.</a></p>
    <div id="fact-image">
      <%= image_tag "fact_photos/#{@fact.id}.png", width: 400, height: 150 %>
    </div>
  </div>

  <div class="add-comment">
    <h2 class="subheader">Discuss this Fact</h2>
    <p>Add a comment to join the discussion!</p>
    <%= render 'comments/comment_form' %>
  </div>

  <div id="comments">
    <h2 class="subheader">View All Comments (<%= @fact.comments.count %>)</h2>
    <%= render @fact.comments %>
  </div>

</div>

</div>
